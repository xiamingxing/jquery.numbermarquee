/*! Numbermarquee - v0.1.0 - 2016-01-06
* https://github.com/xiamingxing/jquery.numbermarquee
* Copyright (c) 2016 xiamingxing; Licensed MIT */
!function(a){a.fn.numbermarquee=function(b){return b=a.extend({},a.fn.numbermarquee.option,b),this.each(function(){function c(a,b,c,d,e){a.length&&a.find("div").stop(!0).animate({top:b+"="+c},d,function(){e&&e(a)})}function d(a,b,d,g,h){var i=f(a),j=d%i.total*i.height;1!==i.flag&&e(a,i.index),c(a,b,j,g,h)}function e(a,b){var c=f(a),d=c.total,e=c.height,g=-((d+b)%(2*d))*e;a.children().css("top",g)}function f(a){var b=a.find("div"),c=a.height(),d=Math.abs(parseInt(b.css("top")))||0,e=b.height(),f=e/c/3,g=Math.round(d/c),h=g%f,i=Math.floor(g/f);return{totalHeight:e,height:c,total:f,index:h,flag:i}}function g(b,c,d,e,f){var g=[];if(a.isArray(b))for(var h=0,i=b.length;i>h;h++)g[h]=c[b[h]]||0;if("string"==typeof b||"number"==typeof b){b=b.toString(),d=d||1;for(var h=0,i=b.length,j="right"===f?e-i:0;i>h;h+=d){var k=b.substr(h,d);g[h+j]=c[k]||0}}for(var h=e-1;h--;)void 0===g[h]&&(g[h]=0);return g}function h(a,b){if(0===arguments.length||void 0===b)return M;N[a]=N[a]||[],N[a][b]=!0,M=!0;for(var c=s;c--;)M=M&&N[a][c];return M}function i(a){for(var b=l.children(),a=g(a,o,q,s,t),c=Math.min(a.length,b.length);c--;){var d=b.eq(c);e(d,a[c])}K=a}function j(a){var c=b.targetValue,d=b.isLoop;return c?"function"==typeof c?(c=[c(a)],a=0):"string"==typeof c||"number"==typeof c?(c=[c],a=a||0):c instanceof Array&&d?a%=c.length:console.error("getValue: targetValue is a object, but expected array;"):console.error("getValue: targetValue is null;"),c?c[a]:!1}function k(a){a=a||0;var b=j(a);if(b!==!1&&void 0!==b)for(var c=l.children(),e=g(b,o,q,s,t),f=Math.min(K.length,e.length,c.length);f--;){var i=c.eq(f),m=e[f]-K[f],p={up:(n+m)%n,down:(2*n-m)%n}[v];d(i,y,p,u,function(c){h(a,c.index())&&(K=e,L=a,x&&void 0!==x.call(l,b,a)||k(a+1))})}}for(var l=a(this),m=b.rangeList,n=m.length,o={},p=0;n>p;p++)o[m[p]]=p;var q=b.cols,r=b.rows,s=b.size,t=b.align,u=b.speed,v=b.direction,w=b.delay,x=b.callBack,y="down"===v?"+":"-";if(b.autoFix){for(var p=0,z=n;z>p;p++)q=Math.max(m[p].toString().length,q);for(var A="pre"===b.fixMode?b.fixContent:"",B="suf"===b.fixMode?b.fixContent:"",p=0,z=n;z>p;p++){var C=m[p].toString().length,D=q-C;if(D>0)for(;D--;)m[p]=A+m[p]+B}}for(var E=b.fontSize||parseInt(l.css("fontSize")),F={lineHeight:E+"px",width:E/2*q,height:E*r},G=m.join(""),H=G+G+G,I=a("<div style='word-wrap: break-word; position: relative;'></div>").html(H),J=a("<span style='float: left; overflow: hidden; position: relative'></span>").css(F).append(I).addClass(b.itemClass),p=0;s>p;p++)l.append(J.clone());l.css({fontSize:E+"px",fontFamily:b.fontFamily,color:b.color});var K=[],L=-1,M=!1,N=[];i(b.defaultValue),w&&setTimeout(function(){k()},w)})},a.fn.numbermarquee.option={punctuation:"1.0.0",rangeList:[0,1,2,3,4,5,6,7,8,9],autoFix:!0,fixMode:"pre",fixContent:"0",cols:1,rows:1,size:18,fontSize:30,fontFamily:"heiti",color:"#eee",itemClass:"charClass",direction:"up",speed:1500,delay:1e3,callBack:function(a,b){},defaultValue:"00000000",targetValue:"",isLoop:!1,align:"right"}}(jQuery);